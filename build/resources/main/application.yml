server:
  port: 8080

spring:
  main:
    allow-circular-references: true

  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: 587
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  datasource:
    url: jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?serverTimezone=Asia/Seoul&useLegacyDatetimeCode=false
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${DB_USER}
    password: ${DB_PASSWORD}
    hikari:
      maximum-pool-size: 10

  jpa:
    hibernate:
      dialect: org.hibernate.dialect.MySQLDialect
      ddl-auto: update
    properties:
      hibernate:
        jdbc:
          time_zone: Asia/Seoul

  application:
    name: planup

  data:
    redis:
      host: localhost
      port: 6379
      timeout: 3000ms

app:
  domain: ${APP_DOMAIN:http://localhost:8080}
  frontend:
    url: ${APP_FRONTEND_URL:http://localhost:3000}

jwt:
  secret: ${JWT_SECRET}
  accessTokenExpiration: 3600000
  refreshTokenExpiration: 1209600000

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method
  packages-to-scan: com.planup.planup

logging:
  level:
    root: INFO
    com.planup.planup: DEBUG
    org.springframework.context.support: OFF
    org.springframework.boot.web: OFF
    reactor.core: OFF
    io.netty: OFF
    org.apache.catalina: OFF
    com.zaxxer.hikari: OFF
    org.hibernate: OFF

aws:
  credentials:
    access-key: ${AWS_ACCESS_KEY}
    secret-key: ${AWS_SECRET_KEY}
  s3:
    bucket: umc-planup-2025
    region: ap-northeast-2

kakao:
  client-id: ${REST_API_KEY}
  auth-url: https://kauth.kakao.com/oauth/token
  api-url: https://kapi.kakao.com/v2/user/me
  redirect-uri: ${KAKAO_REDIRECT_URI:http://localhost:8080/test/kakao/callback}

gemini:
  api-key: ${GOOGLE_API_KEY}
  model: gemini-1.5-flash
  endpoint: https://generativelanguage.googleapis.com/v1beta/models

# Prometheus 모니터링 설정
management:
  endpoints:
    web:
      exposure:
        include: health, info, metrics, prometheus  # Prometheus 엔드포인트 노출
      base-path: /actuator  # 기존 /v1/actuator에서 변경 (표준 경로 사용)
  endpoint:
    health:
      show-details: always  # 헬스 체크 상세 정보 표시
    prometheus:
      enabled: true  # Prometheus 엔드포인트 활성화

  # 메트릭 설정
  metrics:
    tags:
      application: ${spring.application.name}  # 모든 메트릭에 애플리케이션 이름 태그 추가
      environment: ${SPRING_PROFILES_ACTIVE:dev}  # 환경 정보 태그
    distribution:
      percentiles-histogram:
        http.server.requests: true  # HTTP 요청 히스토그램 수집

  # Health 체크 세부 설정
  health:
    db:
      enabled: true  # DB 헬스 체크 활성화
    redis:
      enabled: true  # Redis 헬스 체크 활성화
    diskspace:
      enabled: true  # 디스크 공간 체크
  prometheus:
    metrics:
      export:
        enabled: true